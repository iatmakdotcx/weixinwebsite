/**
 @Title: layui.slider 滑块
 @Author: star1029
 @License：MIT
 */
layui.define("jquery",function(n){"use strict";var t=layui.jquery,f={config:{},index:layui.slider?layui.slider.index+1e4:0,set:function(n){var i=this;return i.config=t.extend({},i.config,n),i},on:function(n,t){return layui.onevent.call(this,h,n,t)}},v=function(){var n=this,t=n.config;return{setValue:function(t,i){return n.slide("set",t,i||0)},config:t}},h="slider",c="layui-disabled",y="layui-slider",l="layui-slider-bar",r="layui-slider-wrap",e="layui-slider-wrap-btn",i="layui-slider-tips",p="layui-slider-input",o="layui-slider-input-txt",s="layui-slider-input-btn",a="layui-slider-hover",u=function(n){var i=this;i.index=++f.index;i.config=t.extend({},i.config,f.config,n);i.render()};u.prototype.config={type:"default",min:0,max:100,value:0,step:1,showstep:!1,tips:!0,input:!1,range:!1,height:200,disabled:!1,theme:"#009688"};u.prototype.render=function(){var u=this,n=u.config,v,p,w,k,d,l,g,a;if(n.step<1&&(n.step=1),n.max<n.min&&(n.max=n.min+n.step),n.range){n.value=typeof n.value=="object"?n.value:[n.min,n.value];v=Math.min(n.value[0],n.value[1]);p=Math.max(n.value[0],n.value[1]);n.value[0]=v>n.min?v:n.min;n.value[1]=p>n.min?p:n.min;n.value[0]=n.value[0]>n.max?n.max:n.value[0];n.value[1]=n.value[1]>n.max?n.max:n.value[1];var f=Math.floor((n.value[0]-n.min)/(n.max-n.min)*100),h=Math.floor((n.value[1]-n.min)/(n.max-n.min)*100),w=h-f+"%";f=f+"%";h=h+"%"}else typeof n.value=="object"&&(n.value=Math.min.apply(null,n.value)),n.value<n.min&&(n.value=n.min),n.value>n.max&&(n.value=n.max),w=Math.floor((n.value-n.min)/(n.max-n.min)*100)+"%";var b=n.disabled?"#c2c2c2":n.theme,tt='<div class="layui-slider '+(n.type==="vertical"?"layui-slider-vertical":"")+'">'+(n.tips?'<div class="layui-slider-tips"><\/div>':"")+'<div class="layui-slider-bar" style="background:'+b+"; "+(n.type==="vertical"?"height":"width")+":"+w+";"+(n.type==="vertical"?"bottom":"left")+":"+(f||0)+';"><\/div><div class="layui-slider-wrap" style="'+(n.type==="vertical"?"bottom":"left")+":"+(f||w)+';"><div class="layui-slider-wrap-btn" style="border: 2px solid '+b+';"><\/div><\/div>'+(n.range?'<div class="layui-slider-wrap" style="'+(n.type==="vertical"?"bottom":"left")+":"+h+';"><div class="layui-slider-wrap-btn" style="border: 2px solid '+b+';"><\/div><\/div>':"")+"<\/div>",s=t(n.elem),nt=s.next("."+y);if(nt[0]&&nt.remove(),u.elemTemp=t(tt),n.range?(u.elemTemp.find("."+r).eq(0).data("value",n.value[0]),u.elemTemp.find("."+r).eq(1).data("value",n.value[1])):u.elemTemp.find("."+r).data("value",n.value),s.html(u.elemTemp),n.type==="vertical"&&u.elemTemp.height(n.height+"px"),n.showstep){for(k=(n.max-n.min)/n.step,d="",l=1;l<k+1;l++)g=l*100/k,g<100&&(d+='<div class="layui-slider-step" style="'+(n.type==="vertical"?"bottom":"left")+":"+g+'%"><\/div>');u.elemTemp.append(d)}n.input&&!n.range&&(a=t('<div class="layui-slider-input layui-input"><div class="layui-slider-input-txt"><input type="text" class="layui-input"><\/div><div class="layui-slider-input-btn"><i class="layui-icon layui-icon-up"><\/i><i class="layui-icon layui-icon-down"><\/i><\/div><\/div>'),s.css("position","relative"),s.append(a),s.find("."+o).children("input").val(n.value),n.type==="vertical"?a.css({left:0,top:-48}):u.elemTemp.css("margin-right",a.outerWidth()+15));n.disabled?(u.elemTemp.addClass(c),u.elemTemp.find("."+e).addClass(c)):u.slide();u.elemTemp.find("."+e).on("mouseover",function(){var f=n.type==="vertical"?n.height:u.elemTemp[0].offsetWidth,s=u.elemTemp.find("."+r),h=n.type==="vertical"?f-t(this).parent()[0].offsetTop-s.height():t(this).parent()[0].offsetLeft,e=h/f*100,o=t(this).parent().data("value"),c=n.setTips?n.setTips(o):o;u.elemTemp.find("."+i).html(c);n.type==="vertical"?u.elemTemp.find("."+i).css({bottom:e+"%","margin-bottom":"20px",display:"inline-block"}):u.elemTemp.find("."+i).css({left:e+"%",display:"inline-block"})}).on("mouseout",function(){u.elemTemp.find("."+i).css("display","none")})};u.prototype.slide=function(n,u,f){var it=this,h=it.config,v=it.elemTemp,y=function(){return h.type==="vertical"?h.height:v[0].offsetWidth},c=v.find("."+r),k=v.next("."+p),b=k.children("."+o).children("input").val(),w=100/((h.max-h.min)/Math.ceil(h.step)),d=function(n,t){var u,f,s,a,r,e;n=Math.ceil(n)*w>100?Math.ceil(n)*w:Math.round(n)*w;n=n>100?100:n;c.eq(t).css(h.type==="vertical"?"bottom":"left",n+"%");u=g(c[0].offsetLeft);f=h.range?g(c[1].offsetLeft):0;h.type==="vertical"?(v.find("."+i).css({bottom:n+"%","margin-bottom":"20px"}),u=g(y()-c[0].offsetTop-c.height()),f=h.range?g(y()-c[1].offsetTop-c.height()):0):v.find("."+i).css("left",n+"%");u=u>100?100:u;f=f>100?100:f;s=Math.min(u,f);a=Math.abs(u-f);h.type==="vertical"?v.find("."+l).css({height:a+"%",bottom:s+"%"}):v.find("."+l).css({width:a+"%",left:s+"%"});r=h.min+Math.round((h.max-h.min)*n/100);b=r;k.children("."+o).children("input").val(b);c.eq(t).data("value",r);r=h.setTips?h.setTips(r):r;v.find("."+i).html(r);h.range&&(e=[c.eq(0).data("value"),c.eq(1).data("value")],e[0]>e[1]&&e.reverse());h.change&&h.change(h.range?e:r)},g=function(n){var t=n/y()*100/w,i=Math.round(t)*w;return n==y()&&(i=Math.ceil(t)*w),i},nt=t('<div class="layui-auxiliar-moving" id="LAY-slider-moving"><\/div'),rt=function(n,i){var r=function(){i&&i();nt.remove()};t("#LAY-slider-moving")[0]||t("body").append(nt);nt.on("mousemove",n);nt.on("mouseup",r).on("mouseleave",r)},tt;if(n==="set")return d(u,f);v.find("."+e).each(function(n){var r=t(this);r.on("mousedown",function(t){var f,u,e,o;t=t||window.event;f=r.parent()[0].offsetLeft;u=t.clientX;h.type==="vertical"&&(f=y()-r.parent()[0].offsetTop-c.height(),u=t.clientY);e=function(t){var e,o;t=t||window.event;e=f+(h.type==="vertical"?u-t.clientY:t.clientX-u);e<0&&(e=0);e>y()&&(e=y());o=e/y()*100/w;d(o,n);r.addClass(a);v.find("."+i).show();t.preventDefault()};o=function(){r.removeClass(a);v.find("."+i).hide()};rt(e,o)})});v.on("click",function(n){var r=t("."+e),i,u,f;!r.is(event.target)&&r.has(event.target).length===0&&r.length&&(i=h.type==="vertical"?y()-n.clientY+t(this).offset().top:n.clientX-t(this).offset().left,i<0&&(i=0),i>y()&&(i=y()),f=i/y()*100/w,u=h.range?h.type==="vertical"?Math.abs(i-parseInt(t(c[0]).css("bottom")))>Math.abs(i-parseInt(t(c[1]).css("bottom")))?1:0:Math.abs(i-c[0].offsetLeft)>Math.abs(i-c[1].offsetLeft)?1:0:0,d(f,u),n.preventDefault())});k.hover(function(){var n=t(this);n.children("."+s).fadeIn("fast")},function(){var n=t(this);n.children("."+s).fadeOut("fast")});k.children("."+s).children("i").each(function(n){t(this).on("click",function(){b=n==1?b-h.step<h.min?h.min:Number(b)-h.step:Number(b)+h.step>h.max?h.max:Number(b)+h.step;var t=(b-h.min)/(h.max-h.min)*100/w;d(t,0)})});tt=function(){var n=this.value,t;n=isNaN(n)?0:n;n=n<h.min?h.min:n;n=n>h.max?h.max:n;this.value=n;t=(n-h.min)/(h.max-h.min)*100/w;d(t,0)};k.children("."+o).children("input").on("keydown",function(n){n.keyCode===13&&(n.preventDefault(),tt.call(this))}).on("change",tt)};u.prototype.events=function(){var n=this,t=n.config};f.render=function(n){var t=new u(n);return v.call(t)};n(h,f)});