/**
 @Title: layui.rate 评分评星
 @Author: star1029
 @License：MIT
 */
layui.define("jquery",function(n){"use strict";var t=layui.jquery,r={config:{},index:layui.rate?layui.rate.index+1e4:0,set:function(n){var i=this;return i.config=t.extend({},i.config,n),i},on:function(n,t){return layui.onevent.call(this,e,n,t)}},c=function(){var n=this,t=n.config;return{setvalue:function(t){n.setvalue.call(n,t)},config:t}},e="rate",l="layui-rate",f="layui-icon-rate",u="layui-icon-rate-solid",o="layui-icon-rate-half",s="layui-icon-rate-solid layui-icon-rate-half",a="layui-icon-rate-solid layui-icon-rate",h="layui-icon-rate layui-icon-rate-half",i=function(n){var i=this;i.index=++r.index;i.config=t.extend({},i.config,r.config,n);i.render()};i.prototype.config={length:5,text:!1,readonly:!1,half:!1,value:0,theme:""};i.prototype.render=function(){var r=this,n=r.config,c=n.theme?'style="color: '+n.theme+';"':"",i,e,o,s,h;for(n.elem=t(n.elem),parseInt(n.value)!==n.value&&(n.half||(n.value=Math.ceil(n.value)-n.value<.5?Math.ceil(n.value):Math.floor(n.value))),i='<ul class="layui-rate" '+(n.readonly?"readonly":"")+">",e=1;e<=n.length;e++)o='<li class="layui-inline"><i class="layui-icon '+(e>Math.floor(n.value)?f:u)+'" '+c+"><\/i><\/li>",i=n.half?parseInt(n.value)!==n.value?e==Math.ceil(n.value)?i+'<li class="layui-inline"><i class="layui-icon layui-icon-rate-half" '+c+"><\/i><\/li>":i+o:i+o:i+o;i+="<\/ul>"+(n.text?'<span class="layui-inline">'+n.value+"星":"")+"<\/span>";s=n.elem;h=s.next("."+l);h[0]&&h.remove();r.elemTemp=t(i);n.span=r.elemTemp.next("span");n.setText&&n.setText(n.value);s.html(r.elemTemp);s.addClass("layui-inline");n.readonly||r.action()};i.prototype.setvalue=function(n){var t=this,i=t.config;i.value=n;t.render()};i.prototype.action=function(){var r=this,n=r.config,i=r.elemTemp,e=i.find("i").width();i.children("li").each(function(r){var l=r+1,c=t(this);c.on("click",function(r){if(n.value=l,n.half){var u=r.pageX-t(this).offset().left;u<=e/2&&(n.value=n.value-.5)}n.text&&i.next("span").text(n.value+"星");n.choose&&n.choose(n.value);n.setText&&n.setText(n.value)});c.on("mousemove",function(r){if(i.find("i").each(function(){t(this).addClass(f).removeClass(s)}),i.find("i:lt("+l+")").each(function(){t(this).addClass(u).removeClass(h)}),n.half){var a=r.pageX-t(this).offset().left;a<=e/2&&c.children("i").addClass(o).removeClass(u)}});c.on("mouseleave",function(){i.find("i").each(function(){t(this).addClass(f).removeClass(s)});i.find("i:lt("+Math.floor(n.value)+")").each(function(){t(this).addClass(u).removeClass(h)});n.half&&parseInt(n.value)!==n.value&&i.children("li:eq("+Math.floor(n.value)+")").children("i").addClass(o).removeClass(a)})})};i.prototype.events=function(){var n=this,t=n.config};r.render=function(n){var t=new i(n);return c.call(t)};n(e,r)});