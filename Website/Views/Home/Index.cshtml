@model MainViewModel;
@{
    ViewData["Title"] = "主页";
}
<div class="weui-tab">
    <div class="weui-tab__bd">
        <div id="mainview" class="weui-tab__bd-item weui-tab__bd-item--active"> </div>
    </div>

    <div class="weui-tabbar">
        <a href="#mainview" data-href="/home/mycards" class="weui-tabbar__item">
            <div class="weui-tabbar__icon">
                <img src="~/images/icon_nav_button.png" alt="">
            </div>
            <p class="weui-tabbar__label">首页</p>
        </a>
        <a href="#mainview" data-href="/home/skincare" class="weui-tabbar__item">
            <div class="weui-tabbar__icon">
                <img src="~/images/icon_nav_msg.png" alt="">
            </div>
            <p class="weui-tabbar__label">美肤预约</p>
        </a>
        <a href="#mainview" data-href="/home/yoga" class="weui-tabbar__item">
            <div class="weui-tabbar__icon">
                <img src="~/images/icon_nav_article.png" alt="">
            </div>
            <p class="weui-tabbar__label">瑜伽预约</p>
        </a>
        <a href="#mainview" data-href="/home/userinfo" class="weui-tabbar__item">
            <div class="weui-tabbar__icon">
                <img src="~/images/icon_nav_cell.png" alt="">
            </div>
            <p class="weui-tabbar__label">我</p>
        </a>
        <a href="#mainview" class="weui-tabbar__item">
            <div class="weui-tabbar__icon">
                <img src="~/images/icon_nav_cell.png" alt="">
            </div>
            <p class="weui-tabbar__label">测试</p>
        </a>
    </div>
</div>

@section Scripts{
<script>
    $(function () {
        $(".date_list a").click(function () {
            var t = $(this);
            t.parent().parent().find(".current").removeClass("current");
            var data = t.addClass("current").attr("data");
            courseData(data);
        });
        function courseData(rq) {
            
        }
        $("body").on("click", "a[data-href]" , function () {
            var url = $(this).attr("data-href");
            if (url) {
                location.hash = "#" + url;
               // loadurl(hash, url);
            }
        })
        function loadurl(id, url) {
            $.ajax({
                url: url,
                type: "get",
                success: function (data) {                    
                    $(id).html(data);                    
                },
                error: function (xhr, status, error) {                    
                    if (xhr.status == 401) {
                        var rurl = xhr.getResponseHeader("Location");
                        if (rurl) loadurl(id, rurl);
                    }
                }
            })
        }
        if (location.hash) {
            loadurl("#mainview", location.hash.substr(1));
        } else {
            loadurl("#mainview", "/home/mycards");
        }
        window.onhashchange = function () {
            loadurl("#mainview", location.hash.substr(1));
        }
    });
</script>
}
   
